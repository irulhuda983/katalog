import{r as c,N as z,$ as M,y as d,o as u,I as a,z as m,U as x,j as i,k as n,_ as f,i as y,h as V,K as U,R as w,Z as _,O as h}from"./index-C9U_2RCw.js";import{u as D,L as C}from"./auth-wmfQfpw9.js";import{X as P}from"./x-DicFuMhW.js";const S={class:"w-full h-screen box-border flex flex-col items-center justify-center"},B={class:"w-full box-border px-8"},R={class:"w-full mb-8"},W={class:"font-bold text-xl"},A={class:"w-full"},T={key:0,class:"text-xs bg-red-500 rounded-[4px] px-4 pr-2 py-2 text-background relative flex items-start justify-between mb-5"},I={key:1,class:"w-full box-border"},K={class:"w-full mb-5"},O={class:"w-full mb-5"},X={class:"w-full"},Z={key:0},q={key:2},F={class:"w-full"},G={key:2,class:"w-full box-border"},H={class:"w-full mb-5"},J={class:"w-full mb-5"},Q={class:"w-full mb-5"},Y={class:"w-full mb-5"},ee={class:"w-full"},se={key:0},ae={key:2},le={class:"w-full"},oe={class:"text-center text-muted-foreground"},ie={__name:"LoginMobile",setup(re){const l=c(!1),E=z(),k=D(),p=M({email:"",password:""}),t=M({email:"",nama:"",telp:"",password:""}),o=c({}),v=c(null),b=c("login"),N=r=>{b.value=r,j()},j=()=>{p.email="",p.password="",t.email="",t.nama="",t.telp="",t.password="",o.value={},v.value=null,l.value=!1},L=async()=>{if(!l.value){l.value=!0,v.value=null;try{const r=await k.login(p);E.go(-1)}catch(r){if(r.response&&r.response.status===422){const e=r.response.data.errors,s={};for(const g in e)s[g]=e[g][0];o.value=s}v.value=r.response.data.message}finally{l.value=!1}}},$=async()=>{if(!l.value){l.value=!0;try{const r=await k.register(t);location.reload()}catch(r){if(r.response&&r.response.status===422){const e=r.response.data.errors,s={};for(const g in e)s[g]=e[g][0];o.value=s}v.value=r.response.data.message}finally{l.value=!1}}};return(r,e)=>(u(),d("div",S,[a("div",B,[a("div",R,[a("div",W,x(b.value=="login"?"Masuk":"Daftar"),1),a("div",A,x(b.value=="login"?"Silahkan login untuk berpartisipasi dalam penawaran.":"Daftarkan diri anda dan tawarkan barang anda."),1)]),v.value?(u(),d("div",T,[a("div",null,x(v.value),1),i(n(P),{class:"size-4 cursor-pointer",onClick:e[0]||(e[0]=s=>v.value=null)})])):m("",!0),b.value=="login"?(u(),d("div",I,[a("div",K,[i(n(f),{label:"Email",modelValue:p.email,"onUpdate:modelValue":e[1]||(e[1]=s=>p.email=s),errorMessage:o.value.email,"onUpdate:errorMessage":e[2]||(e[2]=s=>o.value.email=s)},null,8,["modelValue","errorMessage"])]),a("div",O,[i(n(f),{label:"Password",modelValue:p.password,"onUpdate:modelValue":e[3]||(e[3]=s=>p.password=s),type:"password",errorMessage:o.value.password,"onUpdate:errorMessage":e[4]||(e[4]=s=>o.value.password=s)},null,8,["modelValue","errorMessage"])]),a("div",X,[i(n(_),{onClick:w(L,["prevent"]),type:"submit",class:U(["w-full rounded-[4px] h-12 cursor-pointer mb-5 flex items-center justify-center",l.value?"bg-blue-400 hover:bg-blue-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"])},{default:y(()=>[l.value?m("",!0):(u(),d("div",Z,"Masuk")),l.value?(u(),V(n(C),{key:1,class:"size-5 animate-spin"})):m("",!0),l.value?(u(),d("div",q,"Please Wait")):m("",!0)]),_:1},8,["class"])]),e[16]||(e[16]=a("div",{class:"w-full box-border flex items-center justify-center flex-col relative mb-5"},[a("div",{class:"w-full h-px bg-border"}),a("div",{class:"absolute bg-white px-3 text-[12px]"},"Atau")],-1)),a("div",F,[i(n(_),{onClick:e[5]||(e[5]=w(s=>N("register"),["prevent"])),variant:"outline",type:"button",class:"w-full h-12 rounded-[4px] cursor-pointer border-primary"},{default:y(()=>e[15]||(e[15]=[h(" Daftar ",-1)])),_:1,__:[15]})])])):(u(),d("div",G,[a("div",H,[i(n(f),{label:"Nama / Toko",modelValue:t.nama,"onUpdate:modelValue":e[6]||(e[6]=s=>t.nama=s),errorMessage:o.value.nama,"onUpdate:errorMessage":e[7]||(e[7]=s=>o.value.nama=s)},null,8,["modelValue","errorMessage"])]),a("div",J,[i(n(f),{label:"Email",modelValue:t.email,"onUpdate:modelValue":e[8]||(e[8]=s=>t.email=s),errorMessage:o.value.email,"onUpdate:errorMessage":e[9]||(e[9]=s=>o.value.email=s)},null,8,["modelValue","errorMessage"])]),a("div",Q,[i(n(f),{label:"No. Whatsapp",modelValue:t.telp,"onUpdate:modelValue":e[10]||(e[10]=s=>t.telp=s),errorMessage:o.value.telp,"onUpdate:errorMessage":e[11]||(e[11]=s=>o.value.telp=s)},null,8,["modelValue","errorMessage"])]),a("div",Y,[i(n(f),{label:"Password",modelValue:t.password,"onUpdate:modelValue":e[12]||(e[12]=s=>t.password=s),type:"password",errorMessage:o.value.password,"onUpdate:errorMessage":e[13]||(e[13]=s=>o.value.password=s)},null,8,["modelValue","errorMessage"])]),a("div",ee,[i(n(_),{onClick:w($,["prevent"]),type:"submit",class:U(["w-full rounded-[4px] h-12 cursor-pointer mb-5 flex items-center justify-center",l.value?"bg-blue-400 hover:bg-blue-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"])},{default:y(()=>[l.value?m("",!0):(u(),d("div",se,"Daftar")),l.value?(u(),V(n(C),{key:1,class:"size-5 animate-spin"})):m("",!0),l.value?(u(),d("div",ae,"Please Wait")):m("",!0)]),_:1},8,["class"]),a("div",le,[a("p",oe,[e[17]||(e[17]=h("Sudah punya akun ? ",-1)),a("a",{href:"#",onClick:e[14]||(e[14]=w(s=>b.value="login",["prevent"])),class:"text-blue-600"},"Login")])])])]))])]))}};export{ie as _};
